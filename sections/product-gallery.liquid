<div class="gallery-section" id="Gallery-{{ section.id }}">
  <div
    class="gallery-slider"
    data-flickity='{
      "wrapAround": true,
      "pageDots": true,
      "contain": true,
      "prevNextButtons": true,
      "lazyLoad": true,
      "cellAlign": "center"
    }'
  >
    {% for block in section.blocks %}
      {% if block.settings.image != blank %}
        <div class="gallery-slide" {{ block.shopify_attributes }}>
          <img
            src="{{ block.settings.image | img_url: 'master' }}"
            alt="{{ block.settings.alt | escape }}"
            loading="lazy"
          >
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

{% style %}
.gallery-section {
  background-color: {{ section.settings.background_color }};
  padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
}

.gallery-slider {
  width: 100%;
  max-width: {{ section.settings.max_width }}px;
  margin: 0 auto;
}

.gallery-slide {
  width: 70%;
  margin: 0 10px;
  overflow: hidden;
  border-radius: {{ section.settings.border_radius }}px;
}

.gallery-slide img {
  width: 100%;
  height: auto;
  display: block;
  border-radius: inherit;
}
{% endstyle %}

{% schema %}
{
  "name": "Product Gallery",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#f9f9f9"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 120,
      "step": 10,
      "default": 60,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 120,
      "step": 10,
      "default": 60,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "max_width",
      "label": "Container width",
      "min": 600,
      "max": 2500,
      "step": 100,
      "default": 1400,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Image border radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "default": 12,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Gallery image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "alt",
          "label": "Alt text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Gallery"
    }
  ]
}
{% endschema %}
